set shell := ["cmd.exe", "/c"]

ansible path:
    python build_inventory.py {{path}}
    wsl.exe -- export ANSIBLE_HOST_KEY_CHECKING=False; /root/.local/bin/ansible-playbook ./{{path}}/playbook.yaml -i ./{{path}}/inventory.ini.generated

microk8s-config path:
    just -f {{justfile_directory()}}\justfile --shell sh microk8s-config-private {{path}}

[private]
microk8s-config-private path:
    ssh -o StrictHostKeychecking=no ubuntu@$(cat ../terraform/{{path}}/.output/nat_ip_address.txt) -i ../terraform/{{path}}/.output/ssh.key "sudo microk8s config"